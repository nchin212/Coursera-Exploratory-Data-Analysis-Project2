setwd("/Users/admin/Desktop")
setwd("/Users/admin/Desktop")
# Load file into directory
if (!file.exists("exdata_data_NEI_data")){
fileURL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileURL,destfile = "./exdata_data_NEI_data.zip", method = "curl")
zipF<- "./exdata_data_NEI_data.zip"
unzip(zipF)
file.remove(zipF)
}
NEI <- readRDS("./exdata_data_NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./exdata_data_NEI_data/Source_Classification_Code.rds")
NEI <- readRDS("./summarySCC_PM25.rds")
SCC <- readRDS("./Source_Classification_Code.rds")
head(NEI)
head(SCC)
help(merge)
data <- merge(NEI,SCC,by="SCC")
dim(data)
head(data)
with(data, tapply("Emissions", "year",sum))
with(data, tapply(Emissions, year,sum))
plot(total_by_year)
total_by_year <- with(data, tapply(Emissions, year,sum))
plot(total_by_year)
dates <- unique(data$year)
plot(dates,total_by_year)
plot(dates,total_by_year, lty='l')
help(plot)
plot(dates,total_by_year, type='l')
plot(dates,total_by_year,xticks = dates)
help(plot)
plot(dates,total_by_year)
plot(dates,total_by_year,xlab="Year",ylab="Total PM2.5 Emission")
plot(dates,total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
setwd("/Users/admin/Desktop")
# Load file into directory
if (!file.exists("exdata_data_NEI_data")){
fileURL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileURL,destfile = "./exdata_data_NEI_data.zip", method = "curl")
zipF<- "./exdata_data_NEI_data.zip"
unzip(zipF)
}
plot(dates,total_by_year, type='bar',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(dates,total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
help(barplot)
barplot(total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year/1000,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year/1000000,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year/1000,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year/100,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
barplot(total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
plot(dates,total_by_year,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
plot(dates,total_by_year/1000000,xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions By Year")
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
plot(as.character(dates),total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
axis(1, labels=dates)
axis(0, labels=dates)
axis(1, labels=dates)
axis(1, at = 1:4,labels=dates)
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
axis(1, at = 1:4,labels=dates)
png("plot1.R")
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
dev.off()
setwd("/Users/admin/Desktop/Coursera-Exploratory-Data-Analysis-Project2")
png("plot1.png")
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
dev.off()
NEI <- readRDS("./summarySCC_PM25.rds")
SCC <- readRDS("./Source_Classification_Code.rds")
data <- merge(NEI,SCC,by="SCC")
baltimore <- subset(data, fips=="24510")
head(baltimore)
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
baltimore <- subset(data, fips=="24510")
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
total_by_year <- with(baltimore, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
plot(dates,total_by_year, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions By Year")
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
png("plot1.png")
plot(dates,total_by_year/1000000, type='l',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions in United States")
dev.off()
plot(dates,total_by_year, type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions in Baltimore City")
baltimore <- subset(data, fips=="24510")
total_by_year <- with(baltimore, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year, type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions in Baltimore City")
png("plot2.png")
plot(dates,total_by_year, type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions in Baltimore City")
dev.off()
# Load libraries
library(ggplot2)
baltimore <- subset(data, fips=="24510")
sapply(split(baltimore,baltimore$type),nrow)
library(ggplot2)
library(dplyr)
baltimore %>% group_by(type,year) %>% sum(Emissions)
baltimore %>% group_by(type,year) %>% sum("Emissions")
baltimore %>% group_by(type,year)
type(baltimore$Emissions)
str(baltimore$Emissions)
baltimore %>% group_by(type,year) %>% summarise(add=sum(Emissions))
baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
by_road_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
baltimore <- subset(data, fips=="24510")
by_road_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
by_road_year
ggplot(by_road_year)
dates <- unique(by_road_year$year)
ggplot(dates, by_road_year$total)
ggplot(aes(dates, by_road_year$total))
ggplot(by_road_year,aes(dates, total))
ggplot(by_road_year,aes(year, total))
ggplot(by_road_year,aes(year, total)) + geom_points()
ggplot(by_road_year,aes(year, total)) + geom_points
ggplot(by_road_year,aes(year, total)) + geom_point()
ggplot(by_road_year,aes(year, total)) + geom_line()
ggplot(by_road_year,aes(year, total,col=type))
ggplot(by_road_year,aes(year, total, col=type)) + geom_line()
ggplot(by_road_year,aes(year, total, col=type)) + geom_line() + labels(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City")
ggplot(by_road_year,aes(year, total, col=type)) + geom_line() + labels(x="Year",y="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions in Baltimore City")
help(labels)
ggplot(by_road_year,aes(year, total, col=type)) + geom_line() + labs(x="Year",y="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions in Baltimore City")
ggplot(by_road_year,aes(year, total, col=type)) + geom_line() + labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City")
g <- ggplot(by_road_year,aes(year, total, col=type)) + geom_line()
g + labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City") + theme(plot.title = element_text(hjust = 0.5))
baltimore <- subset(data, fips=="24510")
by_type_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
png("plot3.png")
g <- ggplot(by_type_year,aes(year, total, col=type)) + geom_line()
g + labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City") + theme(plot.title = element_text(hjust = 0.5))
dev.off()
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year/1000000, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions in United States")
baltimore <- subset(data, fips=="24510")
total_by_year <- with(baltimore, tapply(Emissions, year,sum))
dates <- unique(baltimore$year)
plot(dates,total_by_year, type='l', col='blue',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions in Baltimore City")
altimore <- subset(data, fips=="24510")
by_type_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
g <- ggplot(by_type_year,aes(year, total, col=type)) + geom_line()
g + labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City") + theme(plot.title = element_text(hjust = 0.5))
head(data)
help(grep)
ggplot(by_type_year,aes(year, total, col=type))
+ geom_line()
+ labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City")
+ theme(plot.title = element_text(hjust = 0.5))
baltimore <- subset(data, fips=="24510")
by_type_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
ggplot(by_type_year,aes(year, total, col=type))
+ geom_line()
+ labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City")
+ theme(plot.title = element_text(hjust = 0.5))
ggplot(by_type_year,aes(year, total, col=type)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City") +
theme(plot.title = element_text(hjust = 0.5))
help(grel)
help(grepl)
coal <- grepl("Coal",data$Short.Name)
combustion <- grep("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
dim(coal_comb)
coal_comb
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
plot(dates, total_by_year, col='green')
plot(dates, total_by_year, col='green', type='l')
plot(dates, total_by_year, col='darkgreen', type='l')
help(plot)
plot(dates, total_by_year, col='forestgreen', type='l')
plot(dates,total_by_year/1000, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions in United States")
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
plot(dates,total_by_year/1000, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (million tons)", main="Total PM2.5 Emissions in United States")
plot(dates,total_by_year/10000, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (hundred tons)", main="Total PM2.5 Emissions in United States")
plot(dates,total_by_year/100, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (hundred tons)", main="Total PM2.5 Emissions in United States")
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)")
coal <- grepl("Coal",data$Short.Name)
combustion <- grep("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)")
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Coal Combustion")
head(data)
ggplot(by_type_year,aes(year, total, col=type)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City") +
theme(plot.title = element_text(hjust = 0.5))
baltimore_motor <- subset(data, fips=="24510" & type =="ON-ROAD")
str(baltimore_motor)
baltimore_veh <- grep('vehicle',baltimore$EI.Sector,value=TRUE,ignore.case=TRUE)
baltimore <- subset(data, fips=="24510")
baltimore_veh <- grep('vehicle',baltimore$EI.Sector,value=TRUE,ignore.case=TRUE)
head(baltimore_veh)
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,value=TRUE,ignore.case=TRUE),]
head(baltimore_veh)
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
head(baltimore_veh)
coal <- grep("Coal",data$Short.Name)
combustion <- grep("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Coal Combustion")
coal <- grep("Coal",data$Short.Name)
combustion <- grep("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Coal Combustion")
coal <- grepl("Coal",data$Short.Name)
combustion <- grepl("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Coal Combustion")
head(baltimore_veh)
total_by_year <- with(baltimore_veh, tapply(Emissions, year,sum))
dates <- unique(baltimore_veh$year)
plot(dates, total_by_year, col='orange', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Motor Vehicles in Baltimore City")
baltimore <- subset(data, fips=="24510")
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
total_by_year <- with(baltimore_veh, tapply(Emissions, year,sum))
dates <- unique(baltimore_veh$year)
plot(dates, total_by_year, col='orange', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Motor Vehicles in Baltimore City")
plot(dates, total_by_year, col='orange', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Motor Vehicles in Baltimore City")
scc_vehicles <- SCC[grep("[Vv]ehicle", SCC$EI.Sector), "SCC"]
vehicle_emissions <- NEI %>%
filter(SCC %in% scc_vehicles & fips == "24510") %>%
group_by(year) %>%
summarise(Emissions = sum(Emissions))
png("plot5.png", width = 640, height = 480)
v_plot <- ggplot(coal_summary, aes(x=year, y=round(Emissions/1000,2), label=round(Emissions/1000,2), fill=year)) +
geom_bar(stat="identity") + ylab(expression('PM'[2.5]*' Emissions in Kilotons')) + xlab("Year") +
geom_label(aes(fill = year),colour = "white", fontface = "bold") +
ggtitle("Baltimore Vehicle Emissions, 1999 to 2008.")
print(v_plot)
coal_summary <- coal_NEI %>% group_by(year) %>% summarise(Emissions = sum(Emissions))
cc_vehicles <- SCC[grep("[Vv]ehicle", SCC$EI.Sector), "SCC"]
vehicle_emissions <- NEI %>%
filter(SCC %in% scc_vehicles & fips == "24510") %>%
group_by(year) %>%
summarise(Emissions = sum(Emissions))
png("plot5.png", width = 640, height = 480)
v_plot <- ggplot(coal_summary, aes(x=year, y=round(Emissions/1000,2), label=round(Emissions/1000,2), fill=year)) +
geom_bar(stat="identity") + ylab(expression('PM'[2.5]*' Emissions in Kilotons')) + xlab("Year") +
geom_label(aes(fill = year),colour = "white", fontface = "bold") +
ggtitle("Baltimore Vehicle Emissions, 1999 to 2008.")
print(v_plot)
baltimore <- subset(data, fips=="24510")
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
total_by_year <- with(baltimore_veh, tapply(Emissions, year,sum))
total_by_year
dates <- unique(baltimore_veh$year)
plot(dates, total_by_year, col='orange', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Motor Vehicles in Baltimore City")
total_by_year <- with(baltimore_veh, tapply(Emissions, year,sum))
dates
plot(baltimore_veh$year, total_by_year, col='orange', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Motor Vehicles in Baltimore City")
str(baltimore_veh)
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
str(baltimore_veh)
head(baltimore_veh)
# Load libraries
library(dplyr)
baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
# Load libraries
library(ggplot2)
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
dates <- unique(coal_comb$year)
ggplot2(baltimore_sector,aes(year,total))
# Load libraries
library(ggplot2)
ggplot(baltimore_sector,aes(year,total)) + geom_line
ggplot(baltimore_sector,aes(year,total)) + geom_line()
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
ggplot(baltimore_sector,aes(year,total)) + geom_line()
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) + geom_line()
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) + geom_line() + theme(legend.position="bottom")
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) + geom_line()
baltimore_sector
baltimore_sector$EI.Sector <- gsub('Mobile - On-Road ', '', baltimore_sector$EI.Sector)
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) + geom_line()
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City by Vehicle Type") +
theme(plot.title = element_text(hjust = 0.5))
head(coal_comb)
library(ggplot2)
library(dplyr)
coal_comb %>% group_by(Short.Name) %>% summarise(total=sum(Emissions))
coal_comb %>% group_by(Short.Name,year) %>% summarise(total=sum(Emissions))
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
View(baltimore_sector)
baltimore_sector$EI.Sector <- gsub('Mobile - On-Road ', '', baltimore_sector$EI.Sector)
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City by Vehicle Type") +
theme(plot.title = element_text(hjust = 0.5))
setwd("/Users/admin/Desktop/Coursera-Exploratory-Data-Analysis-Project2")
# Load libraries
library(ggplot2)
library(dplyr)
<- readRDS("./summarySCC_PM25.rds")
SCC <- readRDS("./Source_Classification_Code.rds")
data <- merge(NEI,SCC,by="SCC")
baltimore <- subset(data, fips=="24510")
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
baltimore_sector$EI.Sector <- gsub('Mobile - On-Road ', '', baltimore_sector$EI.Sector)
NEI <- readRDS("./summarySCC_PM25.rds")
SCC <- readRDS("./Source_Classification_Code.rds")
data <- merge(NEI,SCC,by="SCC")
baltimore <- subset(data, fips=="24510")
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
baltimore_sector$EI.Sector <- gsub('Mobile - On-Road ', '', baltimore_sector$EI.Sector)
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City by Vehicle Type") +
theme(plot.title = element_text(hjust = 0.5))
baltimore <- subset(data, fips=="24510" % fips=="06037")
baltimore <- subset(data, fips=="24510" & fips=="06037")
baltimore_la <- subset(data, fips=="24510" & fips=="06037")
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
baltimore_la_fips
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la_fips
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
scale_fill_discrete(name = "Location", labels = c("Los Angeles County", "Baltimore City")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5)) +
scale_fill_discrete(name = "Location", labels = c("Los Angeles County", "Baltimore City")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5)) +
scale_fill_discrete(name = "Location", labels = c("Los Angeles County", "Baltimore City")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5)) +
scale_fill_discrete(name = "Location", labels = c("Los Angeles County", "Baltimore City"))
# Read in the rds file
data <- readRDS("./summarySCC_PM25.rds")
# Create plot 1
total_by_year <- with(data, tapply(Emissions, year,sum))
dates <- unique(data$year)
png("plot1.png")
plot(dates,total_by_year/100, type='l', col='red',xlab="Year",ylab="Total PM2.5 Emissions (hundred tons)", main="Total PM2.5 Emissions in United States")
dev.off()
# Create plot 2
baltimore <- subset(data, fips=="24510")
total_by_year <- with(baltimore, tapply(Emissions, year,sum))
dates <- unique(baltimore$year)
png("plot2.png")
plot(dates,total_by_year, type='l', col='blue',xlab="Year",ylab="Total PM2.5 Emissions (tons)", main="Total PM2.5 Emissions in Baltimore City")
dev.off()
baltimore <- subset(data, fips=="24510")
by_type_year <- baltimore %>% group_by(type,year) %>% summarise(total=sum(Emissions))
png("plot3.png")
ggplot(by_type_year,aes(year, total, col=type)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City by Type") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
NEI <- readRDS("./summarySCC_PM25.rds")
SCC <- readRDS("./Source_Classification_Code.rds")
data <- merge(NEI,SCC,by="SCC")
coal <- grepl("Coal",data$Short.Name)
combustion <- grepl("Comb",data$Short.Name)
coal_comb <- data[coal & combustion,]
total_by_year <- with(coal_comb, tapply(Emissions, year,sum))
dates <- unique(coal_comb$year)
png("plot4.png")
plot(dates, total_by_year, col='forestgreen', type='l',xlab="Year",ylab="Total PM2.5 Emissions (tons)",main="Total PM2.5 Emissions from Coal Combustion in United States")
dev.off()
# Load libraries
library(ggplot2)
library(dplyr)
baltimore <- subset(data, fips=="24510")
baltimore_veh <- baltimore[grep('vehicle',baltimore$EI.Sector,ignore.case=TRUE),]
baltimore_sector <- baltimore_veh %>% group_by(EI.Sector,year) %>% summarise(total=sum(Emissions))
baltimore_sector$EI.Sector <- gsub('Mobile - On-Road ', '', baltimore_sector$EI.Sector)
png("plot5.png")
ggplot(baltimore_sector,aes(year,total,col=EI.Sector)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City by Vehicle Type") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
# Create plot 6
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la_fips$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la_fips$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la_fips$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la_fips$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
baltimore_la_fips <- baltimore_la_fips %>% rename(fips = location)
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la_fips$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la_fips$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
baltimore_la_fips <- baltimore_la_fips %>% rename("fips" = "location")
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
baltimore_la_fips
baltimore_la_fips <- baltimore_la_fips %>% rename(fips = location)
rename(baltimore_la_fips,fips = location)
baltimore_la_fips
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
baltimore_la <- baltimore_la %>% rename(fips = location)
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
baltimore_la <- baltimore_la %>% rename(fips = location)
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_loc <- baltimore_la_veh %>% group_by(location,year) %>% summarise(total=sum(Emissions))
baltimore_la
baltimore_la %>% rename(fips = location)
library(dplyr)
baltimore_la %>% rename(fips = location)
help(rename)
# Create plot 6
baltimore_la <- subset(data, fips %in% c("24510","06037"))
baltimore_la_veh <- baltimore_la[grep('vehicle',baltimore_la$EI.Sector,ignore.case=TRUE),]
baltimore_la_fips <- baltimore_la_veh %>% group_by(fips,year) %>% summarise(total=sum(Emissions))
baltimore_la_fips$fips <- gsub('24510', 'Baltimore City', baltimore_la_fips$fips)
baltimore_la_fips$fips <- gsub('06037', 'Los Angeles County', baltimore_la_fips$fips)
baltimore_la_fips <- baltimore_la_fips  %>% rename(location = fips)
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=fips)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
png("plot6.png")
ggplot(baltimore_la_fips,aes(year,total,col=location)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
dev.off()
ggplot(baltimore_la_fips,aes(year,total,col=location)) +
geom_line() +
labs(x="Year",y="Total PM2.5 Emissions (tons)",title="Total PM2.5 Emissions in Baltimore City and Los Angeles County") +
theme(plot.title = element_text(hjust = 0.5))
